diff --git a/drivers/net/dsa/mt7530.c b/drivers/net/dsa/mt7530.c
index 9d372dd8d10d..e02cade4cd78 100644
--- a/drivers/net/dsa/mt7530.c
+++ b/drivers/net/dsa/mt7530.c
@@ -438,8 +438,41 @@ mt7530_pad_clk_setup(struct dsa_switch *ds, int mode)
 {
 	struct mt7530_priv *priv = ds->priv;
 	u32 ncpo1, ssc_delta, trgint, i;
+	int xtal;
 
+	xtal = mt7530_read(priv, MT7530_MHWTRAP);
+	if (xtal < 0) {
+		dev_err(priv->dev, "Can't read HWTRAP!\n");
+		return -EINVAL;
+	}
+	xtal = (xtal >> 9) & 0x3;
+	dev_err(priv->dev, "XTAL = %d!\n", xtal);
+
+#if defined(CONFIG_SOC_MT7621)
+	ssc_delta = 0x87;
+	if (xtal == 0x3)
+		ssc_delta = 0x57;
+#endif
 	switch (mode) {
+#if defined(CONFIG_SOC_MT7621)
+	ncpo1 = 0x078;
+	case PHY_INTERFACE_MODE_RGMII:
+		trgint = 0;
+		// PLL 125MHZ
+		if (xtal == 0x3)
+			ncpo1 = 0x0a00;
+		if (xtal == 0x2)
+			ncpo1 = 0x0640;
+		break;
+	case PHY_INTERFACE_MODE_TRGMII:
+		trgint = 1;
+		// PLL 150MHZ
+		if (xtal == 0x3)
+			ncpo1 = 0x0c00;
+		if (xtal == 0x2)
+			ncpo1 = 0x0780;
+		break;
+#else
 	case PHY_INTERFACE_MODE_RGMII:
 		trgint = 0;
 		ncpo1 = 0x0c80;
@@ -450,6 +483,7 @@ mt7530_pad_clk_setup(struct dsa_switch *ds, int mode)
 		ncpo1 = 0x1400;
 		ssc_delta = 0x57;
 		break;
+#endif
 	default:
 		dev_err(priv->dev, "xMII mode %d not supported\n", mode);
 		return -EINVAL;
@@ -515,9 +549,10 @@ mt7530_pad_clk_setup(struct dsa_switch *ds, int mode)
 		for (i = 0 ; i < NUM_TRGMII_CTRL; i++)
 			mt7530_rmw(priv, MT7530_TRGMII_RD(i),
 				   RD_TAP_MASK, RD_TAP(16));
+#ifndef CONFIG_SOC_MT7621
 	else
 		mt7623_trgmii_set(priv, GSW_INTF_MODE, INTF_MODE_TRGMII);
-
+#endif
 	return 0;
 }
 
@@ -1074,6 +1109,8 @@ mt7530_probe(struct mdio_device *mdiodev)
 	struct mt7530_priv *priv;
 	struct device_node *dn;
 
+	printk("mt7530 probe\n");
+
 	dn = mdiodev->dev.of_node;
 
 	priv = devm_kzalloc(&mdiodev->dev, sizeof(*priv), GFP_KERNEL);
@@ -1173,4 +1210,3 @@ mdio_module_driver(mt7530_mdio_driver);
 MODULE_AUTHOR("Sean Wang <sean.wang@mediatek.com>");
 MODULE_DESCRIPTION("Driver for Mediatek MT7530 Switch");
 MODULE_LICENSE("GPL");
-MODULE_ALIAS("platform:mediatek-mt7530");
